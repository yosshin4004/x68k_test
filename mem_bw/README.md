# MEM_BW.X

X680x0 シリーズのメモリコピーのスループットを計測します。


# 解説

様々な手段、様々な画面出力設定、様々な種類のメモリ間でコピーを実行し、
1 秒間にどれだけのデータ量が転送できるかを計測します。

* メモリの種類
  * メインメモリ
  * グラフィクス VRAM
  * テキスト VRAM
  * PCG 領域
  * スプライトスクロールレジスタ
  * SRAM
  * CGROM
  * IPLROM

* コピー手段
  * バイト単位で転送するナイーブなコピー
  * movem 命令とループ展開を使った高速なコピー
  * DMA 最大速度モードによるコピー
  * DMA 限定速度モード（Band-width ratio 50%, Burst time 16cycles）によるコピー、かつ裏で CPU が高頻度メモリアクセスしない
  * DMA 限定速度モード（Band-width ratio 50%, Burst time 16cycles）によるコピー、かつ裏で CPU が高頻度メモリアクセスする


* ハードウェア設定
  * CRT が 15KHz または 31KHz の場合
  * スプライトおよび BG が表示 on または off の場合
  * グラフィクス VRAM が表示モードまたはバッファモードの場合
  * テキスト VRAM が表示モードまたはバッファモードの場合

安全のため、SRAM 領域はライトプロテクト状態でアクセスを行います。
（実機での計測の結果、ライトプロテクトの有無は計測値に影響しないことが判っています）。


# 計測手順

以下の注意点があります。
よく理解した上で各自の責任の元で実行してください。
* 一回の計測には 30 分程度の時間がかかります。
  * 何かキーを押すと中断します。
* 計測中、CRT モニタを長時間 15kHz インターレース表示します。
  * 液晶モニタを利用している場合、長時間のインターレース表示が焼き付きを発生させる場合があります（通常、数時間で焼き付きは解消します）。

上記の説明を理解した上で、X680x0 上から MEM_BW.X を実行してください。
カレントディレクトリに、mem_bw.log というファイル名で計測結果が生成されます。


# 計測結果を収集しています。ぜひご協力ください。

results 以下に、これまでに得られた計測結果を収録しています。

無改造実機の計測結果を求めています。
ご協力いただける方は計測条件に関する情報と mem_bw.log をお送りください（results 以下に直接プルリクを投げていただいても OK です）。


# ライセンス

計測コードには Apache License Version 2.0 が適用されます。
計測結果は任意の用途でご利用ください。

